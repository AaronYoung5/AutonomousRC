<launch>

  <arg name="simulating" default="false"/>
  <arg name="bag_file" default="false"/>

  <group ns="arduino" if="$(eval not simulating and not bag_file)">
    <arg name="keyboard" default="false"/>

    <node pkg="arduino_interface" type="arduino_interface" name="arduino_interface" output="screen" required="true" respawn="false"/>

    <group if="$(arg keyboard)">
      <node pkg="keyboard_control" type="keyboard_control" name="keyboard_control" output="screen" respawn="false">
        <remap from="/arduino/control" to="/control/control"/>
      </node>
    </group>
  </group>

  <group if="$(eval not simulating and bag_file)">
    <node pkg="arduino_interface" type="arduino_interface_test" name="arduino_interface_test" output="screen" required="true" respawn="false"/>
  </group>
</launch>
